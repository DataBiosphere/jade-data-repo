databaseChangeLog:
  - changeSet:
      id: addpartitions
      author: danmoran
      changes:
        - addColumn:
            tableName: dataset_table
            columns:
              - column:
                  name: partition_mode
                  type: text
              - column:
                  name: partition_column
                  type: ${identifier_type}
              - column:
                  name: int_partition_min_value
                  type: bigint
              - column:
                  name: int_partition_max_value
                  type: bigint
              - column:
                  name: int_partition_interval
                  type: bigint
        - sql:
            comment: Backfill
            sql: >
              UPDATE dataset_table SET partition_mode = 'none'
        - addNotNullConstraint:
            tableName: dataset_table
            columnName: partition_mode
